<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title></title>
		<link rel="stylesheet" href="css/base.css"/>
		<link rel="stylesheet" href="css/index.css"/>
	</head>
	<body>
		<div class="top-bg-height"></div> 
		<div class="xiangqing-box">
						详情
						<img class="fanhui" src="img-other/fanhui1.png"/>
						<img class="sangedian" src="img-other/gengduo1.png"/>
		</div>
		<div class="user-box">			 
			 <div class="user-left">
				 <!-- <img src="img-other/mine2.jpg"> -->
				 
				 <!-- <input type="file" accept="image/*" id="upload-touxiang"  /> -->
				 <input type="file" accept="image/jpeg,image/jpg,image/png,image/svg" id="upload-touxiang"  />
			 </div>
			 <div class="user-right">
			 		<div class="user-name" contenteditable="true">
						北_
					</div>	
					<div class="pyq-text" contenteditable="true">
						1
					</div>
					<div class="pyq-img-box" id="imgSrc">
						<input type="file" accept="image/*" id="upload"  />
						<!-- <img class="pyq-img" src="img-other/mmexport1622567865405.jpg"> -->
					</div>
					<div class="date-del-box">
						<div class="date"><span class="h">17</span>:<span class="m">54</span></div>
						<div class="del">删除</div>
						<div class="more">
							<img class="more-dian1" src="img-other/yuandian1.png"/>
							<img class="more-dian2" src="img-other/yuandian1.png"/>
						</div>
					</div>
			 </div>
		</div>
		
		<div class="zan-pd">
			<div class="zan-box">
				<div class="zan-lf"><img src="img-other/aixin.png"></div>
				<div class="zan-rt">
					 <ul class="zan-ul">
					 	<!-- <li class="zan-list"></li>
						<li class="zan-list"></li>
						<li class="zan-list"></li>
						<li class="zan-list"></li>
						<li class="zan-list"></li>
						<li class="zan-list"></li>
						<li class="zan-list"></li>
						<li class="zan-list"></li>
						<li class="zan-list"></li> -->
						<!-- <li class="zan-list" style="background:url(img-touxiang/421.jpg);background-repeat: no-repeat; background-size: cover; background-position: center;"></li> -->
					 </ul>
				</div>
			</div>
		</div>
		<div class="msg-box-pd">
			<div class="msg-box">
				<div class="msg-lf"><img src="img-other/xinxi.png"></div>
				<div class="msg-rt">
					<div class="msg-list">
						 <div class="msg-img" id="msg1"></div>
						 <div class="msg-text-box">
							 <div class="msg-list-main">
								 <div class="msg-name-date">
									 <div class="msg-name" contenteditable="true">月</div>
									 <div class="msg-date">18:15</div>
								 </div>
								 <div class="msg-text" contenteditable="true">前排</div>
							 </div> 
						 </div>
					</div>
					<div class="msg-list">
						 <div class="msg-img" id="msg2"></div>
						 <div class="msg-text-box">
							 <div class="msg-list-main">
								 <div class="msg-name-date">
									 <div class="msg-name" contenteditable="true">月</div>
									 <div class="msg-date">18:15</div>
								 </div>
								 <div class="msg-text" contenteditable="true">前排</div>
							 </div> 
						 </div>
						 
					</div>
					<div class="msg-list">
						 <div class="msg-img" id="msg3"></div>
						 <div class="msg-text-box">
							 <div class="msg-list-main">
								 <div class="msg-name-date">
									 <div class="msg-name" contenteditable="true">月</div>
									 <div class="msg-date">18:15</div>
								 </div>
								 <div class="msg-text" contenteditable="true">前排</div>
							 </div> 
						 </div>
						 
					</div>
					<div class="msg-list">
						 <div class="msg-img" id="msg4"></div>
						 <div class="msg-text-box">
							 <div class="msg-list-main">
								 <div class="msg-name-date">
									 <div class="msg-name" contenteditable="true">月</div>
									 <div class="msg-date">18:15</div>
								 </div>
								 <div class="msg-text" contenteditable="true">前排</div>
							 </div> 
						 </div>
						 
					</div>	
					<div class="msg-list">
						 <div class="msg-img" id="msg5"></div>
						 <div class="msg-text-box">
							 <div class="msg-list-main">
								 <div class="msg-name-date">
									 <div class="msg-name" contenteditable="true">月</div>
									 <div class="msg-date">18:15</div>
								 </div>
								 <div class="msg-text" contenteditable="true">前排</div>
							 </div> 
						 </div>
						 
					</div>
					
					<div class="msg-list">
						 <div class="msg-img" id="msg6"></div>
						 <div class="msg-text-box">
							 <div class="msg-list-main">
								 <div class="msg-name-date">
									 <div class="msg-name" contenteditable="true">月</div>
									 <div class="msg-date">18:15</div>
								 </div>
								 <div class="msg-text" contenteditable="true">前排</div>
							 </div> 
						 </div>
						 
					</div>
					<!-- <div class="msg-list">
						 <div class="msg-img" id="msg7"></div>
						 <div class="msg-text-box">
							 <div class="msg-list-main">
								 <div class="msg-name-date">
									 <div class="msg-name" contenteditable="true">千禾</div>
									 <div class="msg-date">18:15</div>
								 </div>
								 <div class="msg-text" contenteditable="true">前排</div>
							 </div> 
						 </div>
						 
					</div> -->
				</div>
			</div>
		</div>
		
		<!--操作中心-->
		<!-- <input type="file" accept="image/*" capture="camera" id="file"> -->
		
		<div class="console">
			 <div class="console-title">设置点赞数:</div>
			 <input class="console-text" type="number" />
			 <button class="console-text-sure">确定</button>
		</div>
		<div class="hide-img">
			<button id="hide-img">显示/隐藏图片</button>
		</div>
		
		
		<!-- <div style="color: red;">图片blob地址是:<span class="blob_src"></span></div>
		<img style="width: 100px; height: 100px;" class="blob_src_show" src=""/>
		<div style="color: red;">base64地址是:<span class="base64_src"></span></div>
		<img style="width: 100px; height: 100px;" class="base64_src_show" src=""/> -->
	</body>
	<script src="js/jquery2.1.4.min.js"></script>
	<!-- <script src="https://s3.pstatp.com/cdn/expire-1-M/jquery/3.0.0/jquery.min.js"></script> -->
	<script>
		        //显示时间
				var myDate = new Date();
				
				var addArrCuo = [];
				var flag = 0;   //当前循环要加几分钟
				var timecuo = myDate.getTime(); //获取当前时间戳
				
				for(let i=0;i<7;i++){
					let num = Math.random();  
					let add = "";
					if(num<0.27){
						add = 0;
						flag = flag + add
						console.log("当前循环要加的分钟：",flag)
						var addTime = timecuo + 1000*60*flag
						addArrCuo.push(addTime)
					}else if(num<0.82){
						add = 1;
						flag = flag + add
						console.log("当前循环要加的分钟：",flag)
						var addTime = timecuo + 1000*60*flag
						addArrCuo.push(addTime)
					}else{   //加2分钟
			            add = 2
						flag = flag + add
						console.log("当前循环要加的分钟：",flag)
						var addTime = timecuo + 1000*60*flag
						addArrCuo.push(addTime)
					}
				}
				console.log("新加的时间戳为",addArrCuo);
				addArrCuo.forEach(function(e,index){
					var n_t = new Date(e);
					var n_h = n_t.getHours()>=10?n_t.getHours():'0'+n_t.getHours();       //获取当前小时数(0-23)
					var n_m = n_t.getMinutes()>=10?n_t.getMinutes():'0'+n_t.getMinutes();     //获取当前分钟数(0-59)
					console.log(n_h,n_m);
					$(".msg-date").eq(index).text(n_h+":"+n_m)
				})
		
				//发布时间
				var h = myDate.getHours()>=10?myDate.getHours():'0'+myDate.getHours();       //获取当前小时数(0-23)
				var m = myDate.getMinutes()>=10?myDate.getMinutes():'0'+myDate.getMinutes();     //获取当前分钟数(0-59)
				$(".h").text(h);
				$(".m").text(m);
		
				
                //点击上传图片
				$('#upload').change(function(){
				  var f = document.getElementById('upload').files[0];
				  console.log(f)
				  var blob_src = window.URL.createObjectURL(f);
				  // alert(typeof(blob_src))
				  console.log("图片本地预览链接是:",blob_src); 
				
				  $(".pyq-img-box").css({
					  "background":"url("+blob_src+")",
					  "background-repeat":"no-repea",
					  "background-size": "cover",
					  "background-position": "center"
				  });  
				});
				
				//点击修改头像
				
				$('#upload-touxiang').change(function(){
				  var f = document.getElementById('upload-touxiang').files[0];
				  var src = window.URL.createObjectURL(f);
				  console.log("图片本地预览链接是:",src); 
				  $(".user-left").css({
					  "background":"url("+src+")",
					  "background-repeat":"no-repea",
					  "background-size": "cover",
					  "background-position": "center"
				  });  
				});
				
				//随机生成多少个不重复数字，，手动修改 //随机生成多少个不重复数字，，手动修改 //随机生成多少个不重复数字，
				var count = 766;   //随机生成多少个不重复数字，，手动修改   
				var a = new Array();
				for(var i = 0; i < count; i++){
				    a[i] = i+1;
				}
				a.sort(function(){
				    return 0.5 - Math.random()
				});
				console.log(`随机生成${count}个不重复数字是：${a}`)  //
				
				
				var f = 0;
				$(".console-text-sure").click(function(){	
					
					var showNum = $(".console-text").val();  //显示多少个头像
					var s = f;
					var e = f + Number(showNum);
					console.log(s,e)
					
					var showArr = a.slice(s, e);
					console.log("即将显示的"+showNum+"张图片数组：",showArr);
					f = e;
					
					
					//生成头像
					for(let k=0;k<showArr.length;k++){	
						let imgUrl = showArr[k];  //图片路径，手动修改  
						let html = `<li class="zan-list" 
						style="background:url(img-touxiang/${imgUrl}.jpg);
						background-repeat: no-repeat; 
						background-size: cover; 
						background-position: center;
						"></li>`;
						$(".zan-ul").append(html)
					}
					
					
					//点赞头像随机打乱    
					var showArrSj = arrSort(showArr);
					console.log("留言的头像打乱",showArrSj);
					

					let randomFlag = 0.5;
					
					if(Math.random()>randomFlag){
						$("#msg1").css({
							"background":"url(img-touxiang/"+showArrSj[0]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}else{
						$("#msg1").css({
							"background":"url(img-touxiang/"+a[count-1]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}
					
					
					if(Math.random()>randomFlag){
						$("#msg2").css({
							"background":"url(img-touxiang/"+showArrSj[1]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}else{
						$("#msg2").css({
							"background":"url(img-touxiang/"+a[count-2]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}
					
					
					if(Math.random()>randomFlag){
						$("#msg3").css({
							"background":"url(img-touxiang/"+showArrSj[2]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}else{
						$("#msg3").css({
							"background":"url(img-touxiang/"+a[count-3]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}
					
					
					if(Math.random()>randomFlag){
						$("#msg4").css({
							"background":"url(img-touxiang/"+showArrSj[3]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}else{
						$("#msg4").css({
							"background":"url(img-touxiang/"+a[count-4]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}
					
					
					if(Math.random()>randomFlag){
						$("#msg5").css({
							"background":"url(img-touxiang/"+showArrSj[4]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}else{
						$("#msg5").css({
							"background":"url(img-touxiang/"+a[count-5]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}
					
					
					if(Math.random()>randomFlag){
						$("#msg6").css({
							"background":"url(img-touxiang/"+showArrSj[5]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}else{
						$("#msg6").css({
							"background":"url(img-touxiang/"+a[count-6]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}
					
					
					if(Math.random()>randomFlag){
						$("#msg7").css({
							"background":"url(img-touxiang/"+showArrSj[6]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}else{
						$("#msg7").css({
							"background":"url(img-touxiang/"+a[count-7]+".jpg)",
							"background-repeat":"no-repea",
							"background-size": "cover",
							"background-position": "center"
						})
					}
					
					
					function arrSort(arr){
						arr.sort(function(){
							 return Math.random()-0.5;
						});	
					    return arr;
					}
					
				})
				
				//显示隐藏图片
				$("#hide-img").click(function(){
					$(".pyq-img-box").fadeToggle()
				})

	</script>
</html>
